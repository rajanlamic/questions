http://www.adequatelygood.com/Writing-Testable-JavaScript.html